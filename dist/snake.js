!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.snake=o():t.snake=o()}(this,(function(){return(()=>{"use strict";var t={d:(o,r)=>{for(var e in r)t.o(r,e)&&!t.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:r[e]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,o){return function(t){if(Array.isArray(t))return t}(t)||function(t,o){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,n,i=[],s=!0,a=!1;try{for(r=r.call(t);!(s=(e=r.next()).done)&&(i.push(e.value),!o||i.length!==o);s=!0);}catch(t){a=!0,n=t}finally{try{s||null==r.return||r.return()}finally{if(a)throw n}}return i}}(t,o)||n(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,o){if(t){if("string"==typeof t)return i(t,o);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,o):void 0}}function i(t,o){(null==o||o>t.length)&&(o=t.length);for(var r=0,e=new Array(o);r<o;r++)e[r]=t[r];return e}t.r(o),t.d(o,{default:()=>h});var s=Object.freeze({space:0,head:1,body:11,apple:2}),a=function(t,o){this.xCount=t,this.yCount=o,this.grid=null,this.crash=!1,this.live=!1,this.snakeCoords=null,this.appleCoords=null,this.bodyCoordsStore=[],this.direction=null,this.count=0,this.cell=s};a.prototype.init=function(){this.blankGrid(),this._placeSnakeAndApple()},a.prototype.step=function(){if(!this.crash){var t=e(this.snakeCoords,2),o=t[0],r=t[1];switch(this._updateSnakeBody(),this.direction){case"ArrowUp":r>0?this.snakeCoords=[o,r-1]:this.crash=!0;break;case"ArrowDown":r<this.yCount-1?this.snakeCoords=[o,r+1]:this.crash=!0;break;case"ArrowLeft":o>0?this.snakeCoords=[o-1,r]:this.crash=!0;break;case"ArrowRight":o<this.xCount-1?this.snakeCoords=[o+1,r]:this.crash=!0}this._ateItself(),this._updateGrid()}},a.prototype.resetGameState=function(){this.grid=null,this.crash=!1,this.live=!1,this.snakeCoords=null,this.appleCoords=null,this.bodyCoordsStore=[],this.direction=null,this.count=0},a.prototype.blankGrid=function(){this.grid=[];for(var t=[],o=0;o<this.xCount;o++)t.push(s.space);for(var r=0;r<this.yCount;r++)this.grid.push([].concat(t))},a.prototype._updateGrid=function(){var t=e(this.snakeCoords,2),o=t[0],r=t[1],n=e(this.appleCoords,2),i=n[0],a=n[1];this.blankGrid(),this.grid[r][o]=s.head,this.grid[a][i]=s.apple,this.__handleEatApple(),this.bodyCoordsStore.forEach((function(t){var o=e(t,2),r=o[0],n=o[1];this.grid[n][r]=s.body}),this)},a.prototype._placeApple=function(){this.appleCoords=function(t,o,r){function e(t,o){return t=Math.ceil(t),o=Math.floor(o),Math.floor(Math.random()*(o-t+1)+t)}for(var n=e(0,t-1),i=e(0,o-1),s=function(t){return r.some((function(o){return JSON.stringify(o)===JSON.stringify(t)}))};s([n,i]);)n=e(0,t-1),i=e(0,o-1);return[n,i]}(this.xCount,this.yCount,[this.snakeCoords].concat(r(this.bodyCoordsStore)));var t=e(this.appleCoords,2),o=t[0],n=t[1];this.grid[n][o]=s.apple},a.prototype._updateSnakeBody=function(){this.bodyCoordsStore.push(r(this.snakeCoords)),this.bodyCoordsStore.shift()},a.prototype.__handleEatApple=function(){this.snakeCoords[0]===this.appleCoords[0]&&this.snakeCoords[1]===this.appleCoords[1]&&(console.log("*** eaten at: ".concat(JSON.stringify(this.snakeCoords))),this.bodyCoordsStore.push(r(this.snakeCoords)),this._placeApple(),this.count++)},a.prototype._ateItself=function(){this.bodyCoordsStore.some((function(t){var o=JSON.stringify(this.snakeCoords);return JSON.stringify(t)===o}),this)&&(this.crash=!0)},a.prototype._placeSnakeAndApple=function(){var t=Math.floor((this.xCount-1)/2),o=Math.floor((this.yCount-1)/2);this.snakeCoords=[t,o],this.grid[o][t]=s.head,this._placeApple()};const h=a;return o})()}));